
# AI 智能健康饮食助手 - App 设计需求文档 (Design PRD)

## 1. 全局设计原则 (Design Principles)
*   **信任感 (Trustworthy):** 由于是基于 AI 的健康建议，UI 需体现专业性。关键数据（如营养成分、推荐理由）需高亮展示。
*   **极简操作 (Minimalist):** 目标用户包括高压脑力劳动者，界面应避免噪点，流程需短平快，特别是“确认菜单”和“购物清单”环节。
*   **动态感知 (Dynamic):** 界面需通过微交互（Loading、Toast、刷新动画）让用户感知到 AI 正在根据历史数据实时调整计算。

---

## 2. 信息架构 (Information Architecture)
App 底部导航栏建议分为三大核心模块：
1.  **今日 (Today):** 核心决策页（推荐卡片 -> 确认方案 -> 烹饪执行）。
2.  **采购 (Shopping):** 自动合并的购物清单。
3.  **档案与历史 (History & Me):** 7天滑动窗口数据、历史记录修正、身体数据管理。

---

## 3. 详细页面交互逻辑

### 3.1 模块一：冷启动与画像构建 (Onboarding)
**目标：** 收集必要数据，生成“信任契约”。

*   **页面流程：**
    1.  **基础数据输入：** 简单的表单选择（身高/体重/性别）。
    2.  **职业与状态（核心）：**
        *   **交互：** 提供标签云（Tag Cloud）供快速多选。
        *   **示例标签：** “程序员 (护眼需求)”、“律师 (高压)”、“备孕”、“控糖”。
    3.  **家庭参数 (N)：** 数字选择器，设定常规就餐人数。
    4.  **Loading 页（AI 生成中）：**
        *   **动效：** 展示 AI 正在分析：“正在分析您的职业特征...”、“正在计算 N 人份食材...”
    5.  **结果页 - 《个人/家庭饮食健康策略书》：**
        *   **展示：** 像一份简报，列出 key points（如：“为您定制低 GI 方案以防止午后犯困”）。
        *   **动作：** 底部按钮“开启今日推荐”。

---

### 3.2 模块二：今日 (Today) - 核心主页
此页面随时间/状态变化，分为**“决策态”**和**“执行态”**。

#### A. 决策态 (每日 7:00 AM 推送后)
**页面布局：**
*   **头部：** 日期、天气、今日健康贴士（基于职业，如“今日工作繁重，注意补充 B 族维生素”）。
*   **主体：N+1 推荐卡片流 (Card Stack)**
    *   **逻辑：** 针对 N 人用餐，系统推荐 N+1 道菜供选择。
    *   **卡片内容：**
        *   **菜品图：** 高质量 AI 生成图。
        *   **推荐理由（高亮）：** 使用气泡或高亮色块展示解释性文字，例如“针对程序员久坐...”。
        *   **标签：** “制作难度”、“预计耗时”。
        *   **交互：** 每张卡片右侧有 Checkbox。用户需勾选 N 道菜（或全选）。
*   **底部浮层 (Bottom Sheet)：**
    *   实时汇总选定菜品的总制作时间（备菜+烹饪）。
    *   主按钮：**【确认今日菜单】**。

#### B. 执行态 (点击确认菜单后)
**页面布局：**
*   **时间轴仪表盘 (Time-Table)：**
    *   **交互：** 用户设置“预计开饭时间”（如 19:00）。
    *   **反馈：** 系统自动倒推并显示时间轴节点：“17:30 开始备菜”、“16:00 前完成采购”。支持设置系统闹钟/推送提醒。
*   **今日菜单列表：** 展示已锁定的菜品，点击可进入“烹饪详情页”。
*   **快捷入口：** 一个醒目的按钮跳转至【采购清单】。

#### C. 烹饪详情页 (Recipe Detail)
*   **展示：** 原料（精确到克）、营养标签（高蛋白/低GI）、分步骤图文。
*   **交互：** 步骤条支持勾选“已完成”。

---

### 3.3 模块三：采购清单 (Shopping List)
**逻辑：** 确认菜单后自动生成，支持按超市分区分类。

**页面布局：**
*   **分类视图：** 蔬菜区 / 肉禽区 / 干货调料区。
*   **列表项交互：**
    *   左滑：删除/标记为“家里已有”。
    *   点击：打钩（划线效果），沉底显示。
*   **异常处理：** 若某食材买不到，提供**“替换”**按钮。点击后弹窗询问替换品（如：牛肉换猪肉），这将触发后台数据修正逻辑。

---

### 3.4 模块四：档案与历史 (History & Correction) - **重点交互**
**目标：** 实现数据闭环，允许用户修改过去 7 天的记录，以校准 AI。

**页面布局：**
*   **日历视图 (Calendar View)：**
    *   以 7 天为一周期的滑动窗口。高亮显示最近 7 天。
    *   每日格子上显示摘要：总热量、主要食材图标。
*   **历史详情页 (点击某日进入)：**
    *   展示当日已确认的菜单。
    *   **核心功能 - 动态修正 (The Editor)：**
        *   **入口：** 每个菜品旁有“编辑/修改”图标。
        *   **场景 A (食材替换)：** 用户将“牛肉”改为“猪肉”。
            *   *反馈动效：* 页面出现 Loading，“正在重算当日营养摄入...”，随后更新该日的营养统计柱状图。
        *   **场景 B (漏吃/外食)：** 用户点击“标记为外食”或“未执行”。
            *   *交互：* 弹窗简易补录：“吃了什么？（支持语音或文本输入）”。
*   **数据可视化区：**
    *   展示“偏好漂移”提示：如“最近 7 天您偏爱重口味，建议...”。

---

## 4. 特殊交互逻辑说明 (UX Logic details)

### 4.1 7天滑动窗口的可视化 (The Sliding Window)
在“档案”页面，设计一个可视化的进度条或窗口，明确告知用户：**“AI 的大脑仅基于这 7 天的数据为您服务”**。
*   当用户修改了第 3 天的数据，UI 应通过动效暗示这一修改“流向”了明天的推荐引擎，增强用户的掌控感。

### 4.2 倒推提醒设置 (Reverse Scheduling)
*   **设计样式：** 这是一个强交互组件。用户拨动时钟设置“19:00 开饭”，界面上方的“采购时间”和“备菜时间”应实时联动变化，以直观展示时间成本。

### 4.3 修正与反馈 (Feedback Loop)
*   **负反馈交互：** 如果用户在推荐页连续未勾选某类食材（如胡萝卜），系统应弹出 Toast 或小气泡询问：“是不喜欢胡萝卜吗？”，并提供“不再推荐”或“减少频率”的选项。

---

## 5. 设计交付物清单 (Deliverables)
1.  **UI Flow Chart:** 重点展示 决策 -> 执行 -> 修正 的闭环。
2.  **High-Fidelity Mockups:**
    *   Onboarding (画像标签选择)。
    *   Home (N+1 选菜卡片)。
    *   Shopping List (分类清单)。
    *   History (7天日历与修改弹窗)。
3.  **Component Library:** 需包含统一的营养标签样式、计时器组件、食材替换弹窗。