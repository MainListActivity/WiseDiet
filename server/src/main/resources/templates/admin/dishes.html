<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<head>
    <meta charset="UTF-8">
    <title>菜品库管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@2.0.3"></script>
</head>
<body class="bg-gray-50 min-h-screen">
<div class="max-w-6xl mx-auto py-8 px-4">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-bold text-gray-800">菜品库管理</h1>
        <span class="text-sm text-gray-500">共 <span th:text="${total}">0</span> 道菜</span>
    </div>

    <button class="mb-4 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm"
            th:hx-get="'/admin/ui/dishes/new?token=' + ${token}"
            hx-target="#form-area"
            hx-swap="innerHTML">
        + 新增菜品
    </button>

    <div id="form-area" class="mb-6"></div>

    <div id="dish-list">
        <table class="w-full bg-white rounded shadow text-sm">
            <thead class="bg-gray-100 text-gray-600">
            <tr>
                <th class="px-4 py-3 text-left">ID</th>
                <th class="px-4 py-3 text-left">名称</th>
                <th class="px-4 py-3 text-left">分类</th>
                <th class="px-4 py-3 text-left">难度</th>
                <th class="px-4 py-3 text-left">时间(准备+烹饪)</th>
                <th class="px-4 py-3 text-left">状态</th>
                <th class="px-4 py-3 text-left">操作</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="dish : ${dishes}"
                th:classappend="'dish-row-' + ${dish.id}">
                <td class="px-4 py-3 text-gray-500" th:text="${dish.id}"></td>
                <td class="px-4 py-3 font-medium" th:text="${dish.name}"></td>
                <td class="px-4 py-3 text-gray-600" th:text="${dish.category}"></td>
                <td class="px-4 py-3" th:text="${dish.difficulty}"></td>
                <td class="px-4 py-3" th:text="${dish.prepMin} + '分钟 + ' + ${dish.cookMin} + '分钟'"></td>
                <td class="px-4 py-3">
                    <span th:if="${dish.isActive}" class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs">启用</span>
                    <span th:unless="${dish.isActive}" class="px-2 py-1 bg-gray-100 text-gray-500 rounded text-xs">禁用</span>
                </td>
                <td class="px-4 py-3">
                    <button class="text-xs px-3 py-1 rounded border hover:bg-gray-50"
                            th:hx-post="'/admin/ui/dishes/' + ${dish.id} + '/toggle?token=' + ${token}"
                            hx-target="#dish-list"
                            hx-swap="outerHTML"
                            th:text="${dish.isActive} ? '禁用' : '启用'">
                    </button>
                </td>
            </tr>
            <tr th:if="${#lists.isEmpty(dishes)}">
                <td colspan="7" class="px-4 py-8 text-center text-gray-400">暂无菜品，点击上方新增</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
